POST /mining/experiment HTTP/1.1
Content-Length: 307
Accept-Encoding: gzip, deflate
Host: localhost:8087
Accept: application/json
User-Agent: HTTPie/0.9.2
Connection: keep-alive
Content-Type: application/json

{"variables": [{"code": "cognitive_task2"}], "grouping": [], "covariables": [{"code": "score_test1"}, {"code": "college_math"}], "filters": [], "algorithms": [{"code": "knn", "name": "knn", "parameters": []}], "validations": [{"code": "kfold", "name": "kfold", "parameters": [{"code": "k", "value": "2"}]}]}

HTTP/1.1 200 OK
Server: spray-can/1.3.2
Date: Tue, 30 May 2017 09:07:11 GMT
Content-Type: application/json; charset=UTF-8
Content-Length: 21816

[{
  "code": "knn",
  "name": "knn",
  "data": {
    "cells": {
      "validations": [{
        "code": "kfold",
        "name": "kfold",
        "data": {
          "type": "KFoldCrossValidation",
          "average": {
            "RMSE": 15.760942356228766,
            "R-squared": -1.5007446707016725,
            "MAE": 13.309920147559211,
            "MSE": 248.40730395636595,
            "Explained variance": 63.004206229982486,
            "type": "RegressionScores"
          },
          "folds": {
            "1": {
              "RMSE": 16.61967321541347,
              "R-squared": -1.9727680072996963,
              "MAE": 13.736483133173325,
              "MSE": 276.2135377871319,
              "Explained variance": 185.17404632973472,
              "type": "RegressionScores"
            },
            "0": {
              "RMSE": 14.852645223178252,
              "R-squared": -18.008268825992896,
              "MAE": 12.883357161945098,
              "MSE": 220.60107012559976,
              "Explained variance": 206.03128901252984,
              "type": "RegressionScores"
            }
          }
        }
      }],
      "query": {
        "type": {
          "doc": "Definition of the query that has produced this model",
          "name": "Query",
          "type": "record",
          "fields": [{
            "doc": "Dependent variable",
            "name": "variable",
            "type": "string"
          }, {
            "doc": "List of explanatory variables",
            "name": "covariables",
            "type": {
              "type": "array",
              "items": {
                "type": "string"
              }
            }
          }, {
            "doc": "SQL query",
            "name": "sql",
            "type": "string"
          }, {
            "doc": "Number of records selected by the query",
            "name": "count",
            "type": "int"
          }]
        },
        "init": {
          "variable": "cognitive_task2",
          "covariables": ["score_test1", "college_math"],
          "sql": "select cognitive_task2,score_test1,college_math from linreg_sample where cognitive_task2 is not null and score_test1 is not null and college_math is not null",
          "count": 150
        }
      },
      "model": {
        "type": {
          "name": "knn_model",
          "type": "record",
          "fields": [{
            "name": "k",
            "type": "int"
          }, {
            "name": "samples",
            "type": {
              "type": "array",
              "items": {
                "type": "record",
                "name": "Sample",
                "fields": [{
                  "name": "vars",
                  "type": {
                    "type": "array",
                    "items": "double"
                  }
                }, {
                  "name": "label",
                  "type": "double"
                }]
              }
            }
          }]
        },
        "init": {
          "k": 2,
          "samples": [{
            "vars": [846.260146409254, 10.8950566269225],
            "label": 47.2550814489806
          }, {
            "vars": [1257.85988523301, 95.3513825513228],
            "label": 43.9281508027348
          }, {
            "vars": [1070.64064271806, 82.4857629210718],
            "label": 43.2017809316752
          }, {
            "vars": [1040.84771673984, 19.1015987450481],
            "label": 48.0430759808258
          }, {
            "vars": [1173.4546177907, 30.4334044384277],
            "label": 42.7963941018141
          }, {
            "vars": [1189.9664245547, 48.7741386231632],
            "label": 47.6898181247554
          }, {
            "vars": [904.729842305433, 0.662865615115003],
            "label": 41.1218845341033
          }, {
            "vars": [1126.99944756351, 46.8417791895281],
            "label": 42.7990633860437
          }, {
            "vars": [921.390252076501, 31.1422822999061],
            "label": 35.3848051832818
          }, {
            "vars": [1015.06022139559, 0.0375835448568953],
            "label": 42.6748370060809
          }, {
            "vars": [836.902879205295, 8.33753372635284],
            "label": 42.1595104891871
          }, {
            "vars": [1115.71974745984, 91.730320344485],
            "label": 47.4817658724223
          }, {
            "vars": [1106.23223932655, 17.0190950572963],
            "label": 39.3245277443086
          }, {
            "vars": [967.201556969067, 30.1656292916833],
            "label": 43.7665170958084
          }, {
            "vars": [965.905609790814, 42.6418779842865],
            "label": 42.1055474043867
          }, {
            "vars": [1150.12643238767, 71.1971646862072],
            "label": 46.3452458799297
          }, {
            "vars": [1171.97369724999, 66.2762563968667],
            "label": 40.8102670268525
          }, {
            "vars": [1113.56672218325, 77.5122492805679],
            "label": 36.7182068067479
          }, {
            "vars": [673.905586081931, 11.3424617553302],
            "label": 41.7561114689267
          }, {
            "vars": [1098.70900590245, -0.980215000615212],
            "label": 39.3220451397632
          }, {
            "vars": [909.636712705379, 6.19598299857176],
            "label": 44.9255409405747
          }, {
            "vars": [864.416331154477, 84.4122609018902],
            "label": 43.6452404034793
          }, {
            "vars": [1230.91925615241, 89.8678551272164],
            "label": 43.0996406927577
          }, {
            "vars": [513.03643436432, 77.5381610541205],
            "label": 40.299440329334
          }, {
            "vars": [953.513175705798, 13.8231304581152],
            "label": 42.495572861756
          }, {
            "vars": [1142.49443549816, 66.3969555486012],
            "label": 41.0093516286432
          }, {
            "vars": [507.682100133379, 76.7436583759276],
            "label": 41.4586489307628
          }, {
            "vars": [1294.30305317459, 83.7216300879633],
            "label": 41.3683317524019
          }, {
            "vars": [1191.42336699205, 63.6515827437438],
            "label": 46.627162978812
          }, {
            "vars": [1291.80600320596, 38.9139001654282],
            "label": 41.1977091390502
          }, {
            "vars": [1086.23695741753, 63.3139980924537],
            "label": 42.6734948069328
          }, {
            "vars": [661.751822735005, 42.4855638696068],
            "label": 38.2567759931931
          }, {
            "vars": [933.41393636011, 105.43834666712],
            "label": 37.8665546504691
          }, {
            "vars": [1082.3983362326, 47.8587228052283],
            "label": 37.3548118740719
          }, {
            "vars": [1129.57038104949, 32.6633322305548],
            "label": 49.2254841113261
          }, {
            "vars": [1201.41282652966, 62.9650014578906],
            "label": 42.7151777101835
          }, {
            "vars": [1032.20295709204, 16.0538297336957],
            "label": 40.535453803126
          }, {
            "vars": [1180.87839016314, 70.9273329971529],
            "label": 38.828825521056
          }, {
            "vars": [1095.99378650709, 58.3815291028671],
            "label": 42.1316498056221
          }, {
            "vars": [1181.76620533343, 46.1575099865624],
            "label": 44.3509658334398
          }, {
            "vars": [1119.83833823668, 84.0515475650565],
            "label": 51.0292189607554
          }, {
            "vars": [1192.66677354107, 10.972918009301],
            "label": 44.3603185853229
          }, {
            "vars": [845.8142563223, 37.1055868227109],
            "label": 40.014585898749
          }, {
            "vars": [1196.6476846036, 50.9683550162376],
            "label": 49.6261322491504
          }, {
            "vars": [864.292853570812, 29.0519249410832],
            "label": 44.1440076216689
          }, {
            "vars": [1175.57939635109, 34.5935654364682],
            "label": 40.6648338166449
          }, {
            "vars": [681.216748159258, 51.4332360562223],
            "label": 42.5699397327215
          }, {
            "vars": [1246.47247868491, 90.4953177924061],
            "label": 47.0594688780477
          }, {
            "vars": [689.60419424565, 42.9137604241034],
            "label": 45.9549912537866
          }, {
            "vars": [716.585745380433, 75.2324523971396],
            "label": 40.8764793025571
          }, {
            "vars": [987.088691169184, 76.4977548829325],
            "label": 40.0851796237739
          }, {
            "vars": [937.123075825614, 12.2452740517577],
            "label": 40.9821445512352
          }, {
            "vars": [1180.84720882848, 58.8946170073057],
            "label": 45.9297145306151
          }, {
            "vars": [668.187948174206, 82.8914467602508],
            "label": 43.0341003469512
          }, {
            "vars": [757.028808944054, 72.5131478029362],
            "label": 41.8532171342183
          }, {
            "vars": [1279.31710767159, 74.88059346434],
            "label": 45.1183516997164
          }, {
            "vars": [777.768106694596, 60.4803897693109],
            "label": 37.6501673954461
          }, {
            "vars": [725.857490861738, 67.4711973441631],
            "label": 46.3584737361227
          }, {
            "vars": [910.299903779578, 83.2992285721297],
            "label": 45.9839969446444
          }, {
            "vars": [1063.04718027517, 44.3556225517648],
            "label": 43.0964136113126
          }, {
            "vars": [954.411871380162, 100.98152708025],
            "label": 40.063809824647
          }, {
            "vars": [1004.12052400009, 54.5363702467615],
            "label": 45.7053249597114
          }, {
            "vars": [783.207687715522, 66.0300621254464],
            "label": 43.1915278571268
          }, {
            "vars": [967.100466170088, 91.5859292219081],
            "label": 45.752246678313
          }, {
            "vars": [1267.46744081505, 56.1754430383678],
            "label": 47.2534926371674
          }, {
            "vars": [1117.32506167685, 53.2851516201144],
            "label": 46.5842353433238
          }, {
            "vars": [791.91787353924, 77.0785061307126],
            "label": 45.3349077057338
          }, {
            "vars": [1133.19275529456, 66.1485723445668],
            "label": 40.8601868347402
          }, {
            "vars": [1264.10903243021, 52.3001347941584],
            "label": 46.6117695415626
          }, {
            "vars": [634.067327291053, 102.806749370519],
            "label": 36.6915928028966
          }, {
            "vars": [770.139447697402, 45.1221180405592],
            "label": 39.4150098155788
          }, {
            "vars": [1083.39291855522, 46.9970337331901],
            "label": 44.4011036289836
          }, {
            "vars": [1011.56044241475, 46.0804883795373],
            "label": 51.1732012167635
          }, {
            "vars": [1177.8255552877, 87.7356986163012],
            "label": 47.9033907585249
          }, {
            "vars": [1210.35374875948, 39.8493285749879],
            "label": 43.341275868391
          }, {
            "vars": [1045.08009990956, 81.703299233752],
            "label": 51.4242761962445
          }, {
            "vars": [1272.00760954054, 60.6713914002688],
            "label": 46.7850332628913
          }, {
            "vars": [890.19861263644, 93.909557013248],
            "label": 42.0229844056851
          }, {
            "vars": [1024.57515903864, 52.564386023883],
            "label": 39.5999862008094
          }, {
            "vars": [671.264438691356, 32.6840458572438],
            "label": 47.4591943935572
          }, {
            "vars": [1084.00209256089, -10.0614573108667],
            "label": 46.9787887636899
          }, {
            "vars": [1116.80043848945, 101.813736511285],
            "label": 51.3472088655816
          }, {
            "vars": [584.408656475445, 63.7818807483767],
            "label": 45.6374759832752
          }, {
            "vars": [1038.48354773844, 104.823672843228],
            "label": 48.8574696654821
          }, {
            "vars": [1071.28374002753, 30.5456283823188],
            "label": 48.4288645224393
          }, {
            "vars": [1249.30787909724, 73.6149910766469],
            "label": 48.8481939533142
          }, {
            "vars": [985.018893877844, 84.6382519570175],
            "label": 55.3956211870355
          }, {
            "vars": [478.443230000643, 87.7900715592192],
            "label": 49.2224034306342
          }, {
            "vars": [1098.58604771263, 32.2604960285279],
            "label": 50.5842894505309
          }, {
            "vars": [1144.17072366652, 56.6330780073114],
            "label": 49.3232301792301
          }, {
            "vars": [1104.92572190848, 11.6174229005888],
            "label": 46.1736110884399
          }, {
            "vars": [1126.43072752774, 88.9772431578431],
            "label": 47.3236730150776
          }, {
            "vars": [1075.10058389393, 86.6430574056862],
            "label": 52.2508853305578
          }, {
            "vars": [1283.96591167903, 100.171345512415],
            "label": 53.5429508933631
          }, {
            "vars": [884.02479911424, 37.1577280959368],
            "label": 51.3761255696201
          }, {
            "vars": [1256.82395434189, 70.3594526993649],
            "label": 47.4125325145997
          }, {
            "vars": [1318.63616072216, 65.6946755501329],
            "label": 52.7803306145156
          }, {
            "vars": [1098.53923890839, 34.2082117908456],
            "label": 45.6575596663354
          }, {
            "vars": [1213.84549786767, 93.3706904530544],
            "label": 44.9497741437709
          }, {
            "vars": [1005.70909245913, 2.04425830954121],
            "label": 47.0718634953382
          }, {
            "vars": [1067.98241262817, 94.1968868308387],
            "label": 52.3520990841318
          }, {
            "vars": [954.757532596368, -11.2569495663683],
            "label": 50.1275446168544
          }, {
            "vars": [1134.19713983097, 45.2664631515563],
            "label": 51.8991424811852
          }, {
            "vars": [1283.58554666217, 75.4126413800049],
            "label": 51.701155042752
          }, {
            "vars": [860.381616011784, 65.6683608284329],
            "label": 46.5096869942933
          }, {
            "vars": [954.021821886241, 12.0631355654946],
            "label": 50.3340551199828
          }, {
            "vars": [1322.72889623802, 75.4358717784851],
            "label": 57.2707729199801
          }, {
            "vars": [782.868578137898, 71.3067123163591],
            "label": 46.01806268317
          }, {
            "vars": [1067.2369152361, 41.6215835407022],
            "label": 53.1073577081744
          }, {
            "vars": [1134.68243501511, 98.8392634068299],
            "label": 52.9207546787092
          }, {
            "vars": [746.2094439252, 54.3486850173978],
            "label": 58.9433858107465
          }, {
            "vars": [660.360550667972, 14.0136597457556],
            "label": 55.3482387406075
          }, {
            "vars": [880.92952213552, -7.27896369477907],
            "label": 52.826862555855
          }, {
            "vars": [943.815175400835, -9.03620125076102],
            "label": 57.84869293407
          }, {
            "vars": [845.446663319365, 40.6117690395197],
            "label": 59.4580323970231
          }, {
            "vars": [1245.58987941351, 76.303139881312],
            "label": 51.2882892488185
          }, {
            "vars": [949.033636107305, 45.8823275367351],
            "label": 63.5995205102192
          }, {
            "vars": [909.601601435424, 108.214285916393],
            "label": 61.456836180375
          }, {
            "vars": [878.534135496292, 71.9938162161805],
            "label": 54.0476564225461
          }, {
            "vars": [1157.21620130665, 95.988670398983],
            "label": 53.487175738962
          }, {
            "vars": [1166.62358545484, 65.9213243907764],
            "label": 50.8336401217715
          }, {
            "vars": [687.04169221365, 97.3644194143592],
            "label": 56.4301551720339
          }, {
            "vars": [674.285633344403, 41.4998140740732],
            "label": 58.9358091201088
          }, {
            "vars": [1224.40828399526, 23.0040088090994],
            "label": 54.5631918843479
          }, {
            "vars": [1220.04382455505, 53.2594625218767],
            "label": 51.8366144896083
          }, {
            "vars": [1237.95136302964, 7.13670335956469],
            "label": 54.1605200671445
          }, {
            "vars": [1121.08464063964, 29.007326156249],
            "label": 60.0034393609284
          }, {
            "vars": [1115.67158739686, 31.4570761848145],
            "label": 66.6646707895428
          }, {
            "vars": [666.734537123693, 66.8197965432952],
            "label": 64.9701703329577
          }, {
            "vars": [1109.13825948618, 21.6424101398151],
            "label": 62.8885026538371
          }, {
            "vars": [777.038303548392, 101.445555651212],
            "label": 60.8919194382482
          }, {
            "vars": [706.639352128231, 96.0793710018718],
            "label": 62.2282697282058
          }, {
            "vars": [789.196284809264, 72.2737889366644],
            "label": 68.2569882054231
          }, {
            "vars": [1029.16401966856, 72.6776264950531],
            "label": 61.6914385299165
          }, {
            "vars": [1203.65193315436, 30.1549784144448],
            "label": 62.8048973729607
          }, {
            "vars": [1060.8209638646, 84.0688461182516],
            "label": 64.9403859184418
          }, {
            "vars": [1237.74209241468, 53.5404287300988],
            "label": 61.9675407638305
          }, {
            "vars": [817.900513392945, 105.475483565321],
            "label": 72.8212109621609
          }, {
            "vars": [672.528911723231, 18.4602673846622],
            "label": 63.9990452042156
          }, {
            "vars": [1028.31487405465, 74.3446019445954],
            "label": 63.4760560343513
          }, {
            "vars": [882.707569634284, 28.8766235483349],
            "label": 76.3951678098878
          }, {
            "vars": [858.770382911635, 30.1450258818308],
            "label": 77.6690429297518
          }, {
            "vars": [1144.68937290248, 39.8628281841808],
            "label": 69.0579727278915
          }, {
            "vars": [1052.03737906786, 36.632244356825],
            "label": 74.3829256127955
          }, {
            "vars": [1092.13092530721, 30.786670648339],
            "label": 71.1535879600277
          }, {
            "vars": [790.788068522906, 8.65051220101787],
            "label": 75.7395918213511
          }, {
            "vars": [1034.94120689743, 82.1929259112897],
            "label": 76.7576476291461
          }, {
            "vars": [814.831009573164, 22.3140768265508],
            "label": 72.3854784502205
          }, {
            "vars": [835.318980324187, 81.2770354035792],
            "label": 80.4738996626954
          }, {
            "vars": [629.20660132652, 40.2468787531718],
            "label": 75.1952890431974
          }]
        }
      }
    },
    "name": "rapidminer",
    "fcns": {
      "toArray": {
        "params": [{
          "m": "DependentVariables"
        }],
        "ret": {
          "type": "array",
          "items": "double"
        },
        "do": [{
          "type": {
            "type": "array",
            "items": "double"
          },
          "new": [{
            "attr": "m",
            "path": [{
              "string": "score_test1"
            }]
          }, {
            "attr": "m",
            "path": [{
              "string": "college_math"
            }]
          }]
        }]
      }
    },
    "doc": "RapidMiner Model\n",
    "metadata": {
      "docker_image": "hbpmip/java-rapidminer-knn:58e280f"
    },
    "output": {
      "doc": "Output is the estimate of the variable",
      "type": "double"
    },
    "action": [{
      "let": {
        "model": {
          "cell": "model"
        }
      }
    }, {
      "let": {
        "knn": {
          "model.neighbor.nearestK": ["model.k", {
            "u.toArray": ["input"]
          }, "model.samples", {
            "params": [{
              "x": {
                "type": "array",
                "items": "double"
              }
            }, {
              "y": "Sample"
            }],
            "ret": "double",
            "do": {
              "metric.simpleEuclidean": ["x", "y.vars"]
            }
          }]
        }
      }
    }, {
      "let": {
        "label_list": {
          "type": {
            "type": "array",
            "items": "double"
          },
          "value": []
        }
      }
    }, {
      "foreach": "neighbour",
      "in": "knn",
      "do": [{
        "set": {
          "label_list": {
            "a.append": ["label_list", "neighbour.label"]
          }
        }
      }]
    }, {
      "a.mean": ["label_list"]
    }],
    "input": {
      "doc": "Input is the list of covariables and groups",
      "name": "DependentVariables",
      "type": "record",
      "fields": [{
        "name": "score_test1",
        "type": "double"
      }, {
        "name": "college_math",
        "type": "double"
      }]
    }
  }
}]