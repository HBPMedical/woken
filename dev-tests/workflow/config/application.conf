
# Sample configuration for local execution of the workflow

akka {
  loglevel = DEBUG

  actor {
    debug {
      receive = on
      autoreceive = on
      lifecycle = on
      fsm = on
    }
  }
}

spray.can.server {
  idle-timeout = 300s
  request-timeout = 180s
}

app {
  systemName = "workflow-manager"
  jobServiceName = "job-service"
  interface = "0.0.0.0"
  port = 8087
}

jobs {
  node = "federation"
  owner = "admin@mip.chuv.ch"
  chronosServerUrl = "http://"${HOST}":4400"
  ldsmDb = "ldsm"
  resultDb = "analytics"
}

db {
  analytics {
    jdbc_driver="org.postgresql.Driver"
    jdbc_jar_path="/usr/lib/R/libraries/postgresql-9.4-1201.jdbc41.jar"
    jdbc_url="jdbc:postgresql://"${HOST}":5432/postgres"
    jdbc_user="postgres"
    jdbc_password="test"
  }

  ldsm {
    jdbc_driver="org.postgresql.Driver"
    jdbc_jar_path="/usr/lib/R/libraries/postgresql-9.3-1103.jdbc41.jar"
    jdbc_url="jdbc:postgresql://"${HOST}":65432/postgres"
    jdbc_user="postgres"
    jdbc_password="test"
  }

}

defaultSettings {
  # Default settings for the request service
  request {
    nodes = {}
    inDb = "ldsm"
    outDb = "analytics"
    mainTable = "ADNI_MERGE"

    functions {
      # boxplot is an alias for summarystatistics
      boxplot = "hbpmip/r-summary-stats:latest"
      summarystatistics = "hbpmip/r-summary-stats:latest"
      linearregression = "hbpmip/r-linear-regression:latest"
    }
  }
}
