{
  "data": [
    {
      "algorithm": "python-knn",
      "algorithmSpec": {
        "code": "knn",
        "parameters": [
          {
            "code": "k",
            "value": "5"
          }
        ]
      },
      "data": {
        "action": [
          {
            "let": {
              "x": {
                "a.flatten": [
                  {
                    "new": [
                      {
                        "u.arr": [
                          {
                            "/": [
                              {
                                "-": [
                                  {
                                    "cast.double": [
                                      {
                                        "attr": "input",
                                        "path": [
                                          {
                                            "string": "score_test1"
                                          }
                                        ]
                                      }
                                    ]
                                  },
                                  0.0
                                ]
                              },
                              1.0
                            ]
                          }
                        ]
                      },
                      {
                        "u.arr": [
                          {
                            "/": [
                              {
                                "-": [
                                  {
                                    "cast.double": [
                                      {
                                        "attr": "input",
                                        "path": [
                                          {
                                            "string": "college_math"
                                          }
                                        ]
                                      }
                                    ]
                                  },
                                  0.0
                                ]
                              },
                              1.0
                            ]
                          }
                        ]
                      }
                    ],
                    "type": {
                      "items": {
                        "items": "double",
                        "type": "array"
                      },
                      "type": "array"
                    }
                  }
                ]
              }
            }
          },
          {
            "let": {
              "neighbors": {
                "model.neighbor.nearestK": [
                  {
                    "cell": "nNeighbors"
                  },
                  "x",
                  {
                    "cell": "codebook"
                  },
                  {
                    "do": [
                      {
                        "metric.simpleEuclidean": [
                          "x",
                          {
                            "attr": "p",
                            "path": [
                              {
                                "string": "x"
                              }
                            ]
                          }
                        ]
                      }
                    ],
                    "params": [
                      {
                        "x": {
                          "items": "double",
                          "type": "array"
                        }
                      },
                      {
                        "p": {
                          "fields": [
                            {
                              "name": "x",
                              "type": {
                                "items": "double",
                                "type": "array"
                              }
                            },
                            {
                              "name": "y",
                              "type": "double"
                            }
                          ],
                          "name": "Point",
                          "type": "record"
                        }
                      }
                    ],
                    "ret": "double"
                  }
                ]
              }
            }
          },
          {
            "a.mean": [
              {
                "a.map": [
                  "neighbors",
                  {
                    "do": [
                      {
                        "attr": "p",
                        "path": [
                          {
                            "string": "y"
                          }
                        ]
                      }
                    ],
                    "params": [
                      {
                        "p": "Point"
                      }
                    ],
                    "ret": "double"
                  }
                ]
              }
            ]
          }
        ],
        "cells": {
          "codebook": {
            "init": [
              {
                "x": [
                  674.28563,
                  41.49981
                ],
                "y": 58.93581
              },
              {
                "x": [
                  878.53414,
                  71.99382
                ],
                "y": 54.04766
              },
              {
                "x": [
                  770.13945,
                  45.12212
                ],
                "y": 39.41501
              },
              {
                "x": [
                  791.91787,
                  77.07851
                ],
                "y": 45.33491
              },
              {
                "x": [
                  1291.806,
                  38.9139
                ],
                "y": 41.19771
              },
              {
                "x": [
                  1196.64768,
                  50.96836
                ],
                "y": 49.62613
              },
              {
                "x": [
                  1121.08464,
                  29.00733
                ],
                "y": 60.00344
              },
              {
                "x": [
                  890.19861,
                  93.90956
                ],
                "y": 42.02298
              },
              {
                "x": [
                  882.70757,
                  28.87662
                ],
                "y": 76.39517
              },
              {
                "x": [
                  967.10047,
                  91.58593
                ],
                "y": 45.75225
              },
              {
                "x": [
                  1071.28374,
                  30.54563
                ],
                "y": 48.42886
              },
              {
                "x": [
                  1028.31487,
                  74.3446
                ],
                "y": 63.47606
              },
              {
                "x": [
                  1115.71975,
                  91.73032
                ],
                "y": 47.48177
              },
              {
                "x": [
                  1117.32506,
                  53.28515
                ],
                "y": 46.58424
              },
              {
                "x": [
                  864.41633,
                  84.41226
                ],
                "y": 43.64524
              },
              {
                "x": [
                  1024.57516,
                  52.56439
                ],
                "y": 39.59999
              },
              {
                "x": [
                  904.72984,
                  0.66287
                ],
                "y": 41.12188
              },
              {
                "x": [
                  1150.12643,
                  71.19716
                ],
                "y": 46.34525
              },
              {
                "x": [
                  1032.20296,
                  16.05383
                ],
                "y": 40.53545
              },
              {
                "x": [
                  1224.40828,
                  23.00401
                ],
                "y": 54.56319
              },
              {
                "x": [
                  1267.46744,
                  56.17544
                ],
                "y": 47.25349
              },
              {
                "x": [
                  1173.45462,
                  30.4334
                ],
                "y": 42.79639
              },
              {
                "x": [
                  777.0383,
                  101.44556
                ],
                "y": 60.89192
              },
              {
                "x": [
                  814.83101,
                  22.31408
                ],
                "y": 72.38548
              },
              {
                "x": [
                  681.21675,
                  51.43324
                ],
                "y": 42.56994
              },
              {
                "x": [
                  985.01889,
                  84.63825
                ],
                "y": 55.39562
              },
              {
                "x": [
                  817.90051,
                  105.47548
                ],
                "y": 72.82121
              },
              {
                "x": [
                  1213.8455,
                  93.37069
                ],
                "y": 44.94977
              },
              {
                "x": [
                  1249.30788,
                  73.61499
                ],
                "y": 48.84819
              },
              {
                "x": [
                  1283.58555,
                  75.41264
                ],
                "y": 51.70116
              },
              {
                "x": [
                  954.75753,
                  -11.25695
                ],
                "y": 50.12754
              },
              {
                "x": [
                  1113.56672,
                  77.51225
                ],
                "y": 36.71821
              },
              {
                "x": [
                  1191.42337,
                  63.65158
                ],
                "y": 46.62716
              },
              {
                "x": [
                  1109.13826,
                  21.64241
                ],
                "y": 62.8885
              },
              {
                "x": [
                  725.85749,
                  67.4712
                ],
                "y": 46.35847
              },
              {
                "x": [
                  937.12308,
                  12.24527
                ],
                "y": 40.98214
              },
              {
                "x": [
                  1129.57038,
                  32.66333
                ],
                "y": 49.22548
              },
              {
                "x": [
                  1157.2162,
                  95.98867
                ],
                "y": 53.48718
              },
              {
                "x": [
                  513.03643,
                  77.53816
                ],
                "y": 40.29944
              },
              {
                "x": [
                  880.92952,
                  -7.27896
                ],
                "y": 52.82686
              },
              {
                "x": [
                  954.41187,
                  100.98153
                ],
                "y": 40.06381
              },
              {
                "x": [
                  909.63671,
                  6.19598
                ],
                "y": 44.92554
              },
              {
                "x": [
                  1115.67159,
                  31.45708
                ],
                "y": 66.66467
              },
              {
                "x": [
                  706.63935,
                  96.07937
                ],
                "y": 62.22827
              },
              {
                "x": [
                  987.08869,
                  76.49775
                ],
                "y": 40.08518
              },
              {
                "x": [
                  967.20156,
                  30.16563
                ],
                "y": 43.76652
              },
              {
                "x": [
                  1119.83834,
                  84.05155
                ],
                "y": 51.02922
              },
              {
                "x": [
                  1040.84772,
                  19.1016
                ],
                "y": 48.04308
              },
              {
                "x": [
                  1052.03738,
                  36.63224
                ],
                "y": 74.38293
              },
              {
                "x": [
                  845.44666,
                  40.61177
                ],
                "y": 59.45803
              },
              {
                "x": [
                  1230.91926,
                  89.86786
                ],
                "y": 43.09964
              },
              {
                "x": [
                  1283.96591,
                  100.17135
                ],
                "y": 53.54295
              },
              {
                "x": [
                  1245.58988,
                  76.30314
                ],
                "y": 51.28829
              },
              {
                "x": [
                  1133.19276,
                  66.14857
                ],
                "y": 40.86019
              },
              {
                "x": [
                  1279.31711,
                  74.88059
                ],
                "y": 45.11835
              },
              {
                "x": [
                  1092.13093,
                  30.78667
                ],
                "y": 71.15359
              },
              {
                "x": [
                  835.31898,
                  81.27704
                ],
                "y": 80.4739
              },
              {
                "x": [
                  953.51318,
                  13.82313
                ],
                "y": 42.49557
              },
              {
                "x": [
                  1294.30305,
                  83.72163
                ],
                "y": 41.36833
              },
              {
                "x": [
                  1318.63616,
                  65.69468
                ],
                "y": 52.78033
              },
              {
                "x": [
                  1180.87839,
                  70.92733
                ],
                "y": 38.82883
              },
              {
                "x": [
                  1116.80044,
                  101.81374
                ],
                "y": 51.34721
              },
              {
                "x": [
                  1060.82096,
                  84.06885
                ],
                "y": 64.94039
              },
              {
                "x": [
                  671.26444,
                  32.68405
                ],
                "y": 47.45919
              },
              {
                "x": [
                  782.86858,
                  71.30671
                ],
                "y": 46.01806
              },
              {
                "x": [
                  1098.58605,
                  32.2605
                ],
                "y": 50.58429
              },
              {
                "x": [
                  1237.74209,
                  53.54043
                ],
                "y": 61.96754
              },
              {
                "x": [
                  1082.39834,
                  47.85872
                ],
                "y": 37.35481
              },
              {
                "x": [
                  789.19628,
                  72.27379
                ],
                "y": 68.25699
              },
              {
                "x": [
                  1272.00761,
                  60.67139
                ],
                "y": 46.78503
              },
              {
                "x": [
                  660.36055,
                  14.01366
                ],
                "y": 55.34824
              },
              {
                "x": [
                  1045.0801,
                  81.7033
                ],
                "y": 51.42428
              },
              {
                "x": [
                  1166.62359,
                  65.92132
                ],
                "y": 50.83364
              },
              {
                "x": [
                  1264.10903,
                  52.30013
                ],
                "y": 46.61177
              },
              {
                "x": [
                  921.39025,
                  31.14228
                ],
                "y": 35.38481
              },
              {
                "x": [
                  1203.65193,
                  30.15498
                ],
                "y": 62.8049
              },
              {
                "x": [
                  1070.64064,
                  82.48576
                ],
                "y": 43.20178
              },
              {
                "x": [
                  757.02881,
                  72.51315
                ],
                "y": 41.85322
              },
              {
                "x": [
                  1011.56044,
                  46.08049
                ],
                "y": 51.1732
              },
              {
                "x": [
                  1104.92572,
                  11.61742
                ],
                "y": 46.17361
              },
              {
                "x": [
                  909.6016,
                  108.21429
                ],
                "y": 61.45684
              },
              {
                "x": [
                  687.04169,
                  97.36442
                ],
                "y": 56.43016
              },
              {
                "x": [
                  1144.68937,
                  39.86283
                ],
                "y": 69.05797
              },
              {
                "x": [
                  954.02182,
                  12.06314
                ],
                "y": 50.33406
              },
              {
                "x": [
                  943.81518,
                  -9.0362
                ],
                "y": 57.84869
              },
              {
                "x": [
                  1067.23692,
                  41.62158
                ],
                "y": 53.10736
              },
              {
                "x": [
                  666.73454,
                  66.8198
                ],
                "y": 64.97017
              },
              {
                "x": [
                  777.76811,
                  60.48039
                ],
                "y": 37.65017
              },
              {
                "x": [
                  668.18795,
                  82.89145
                ],
                "y": 43.0341
              },
              {
                "x": [
                  1098.70901,
                  -0.98022
                ],
                "y": 39.32205
              },
              {
                "x": [
                  1192.66677,
                  10.97292
                ],
                "y": 44.36032
              },
              {
                "x": [
                  673.90559,
                  11.34246
                ],
                "y": 41.75611
              },
              {
                "x": [
                  1034.94121,
                  82.19293
                ],
                "y": 76.75765
              },
              {
                "x": [
                  1246.47248,
                  90.49532
                ],
                "y": 47.05947
              },
              {
                "x": [
                  629.2066,
                  40.24688
                ],
                "y": 75.19529
              },
              {
                "x": [
                  1181.76621,
                  46.15751
                ],
                "y": 44.35097
              },
              {
                "x": [
                  478.44323,
                  87.79007
                ],
                "y": 49.2224
              },
              {
                "x": [
                  1075.10058,
                  86.64306
                ],
                "y": 52.25089
              },
              {
                "x": [
                  1067.98241,
                  94.19689
                ],
                "y": 52.3521
              },
              {
                "x": [
                  584.40866,
                  63.78188
                ],
                "y": 45.63748
              },
              {
                "x": [
                  1322.7289,
                  75.43587
                ],
                "y": 57.27077
              },
              {
                "x": [
                  1189.96642,
                  48.77414
                ],
                "y": 47.68982
              },
              {
                "x": [
                  1171.9737,
                  66.27626
                ],
                "y": 40.81027
              },
              {
                "x": [
                  846.26015,
                  10.89506
                ],
                "y": 47.25508
              },
              {
                "x": [
                  1134.19714,
                  45.26646
                ],
                "y": 51.89914
              },
              {
                "x": [
                  1004.12052,
                  54.53637
                ],
                "y": 45.70532
              },
              {
                "x": [
                  1106.23224,
                  17.0191
                ],
                "y": 39.32453
              },
              {
                "x": [
                  507.6821,
                  76.74366
                ],
                "y": 41.45865
              },
              {
                "x": [
                  1175.5794,
                  34.59357
                ],
                "y": 40.66483
              },
              {
                "x": [
                  845.81426,
                  37.10559
                ],
                "y": 40.01459
              },
              {
                "x": [
                  1126.43073,
                  88.97724
                ],
                "y": 47.32367
              },
              {
                "x": [
                  1257.85989,
                  95.35138
                ],
                "y": 43.92815
              },
              {
                "x": [
                  1177.82556,
                  87.7357
                ],
                "y": 47.90339
              },
              {
                "x": [
                  910.2999,
                  83.29923
                ],
                "y": 45.984
              },
              {
                "x": [
                  933.41394,
                  105.43835
                ],
                "y": 37.86655
              },
              {
                "x": [
                  836.90288,
                  8.33753
                ],
                "y": 42.15951
              },
              {
                "x": [
                  884.0248,
                  37.15773
                ],
                "y": 51.37613
              },
              {
                "x": [
                  858.77038,
                  30.14503
                ],
                "y": 77.66904
              },
              {
                "x": [
                  1237.95136,
                  7.1367
                ],
                "y": 54.16052
              },
              {
                "x": [
                  783.20769,
                  66.03006
                ],
                "y": 43.19153
              },
              {
                "x": [
                  1098.53924,
                  34.20821
                ],
                "y": 45.65756
              },
              {
                "x": [
                  1083.39292,
                  46.99703
                ],
                "y": 44.4011
              },
              {
                "x": [
                  949.03364,
                  45.88233
                ],
                "y": 63.59952
              },
              {
                "x": [
                  1134.68244,
                  98.83926
                ],
                "y": 52.92075
              },
              {
                "x": [
                  1210.35375,
                  39.84933
                ],
                "y": 43.34128
              },
              {
                "x": [
                  1038.48355,
                  104.82367
                ],
                "y": 48.85747
              },
              {
                "x": [
                  716.58575,
                  75.23245
                ],
                "y": 40.87648
              },
              {
                "x": [
                  1063.04718,
                  44.35562
                ],
                "y": 43.09641
              },
              {
                "x": [
                  1256.82395,
                  70.35945
                ],
                "y": 47.41253
              },
              {
                "x": [
                  1095.99379,
                  58.38153
                ],
                "y": 42.13165
              },
              {
                "x": [
                  790.78807,
                  8.65051
                ],
                "y": 75.73959
              },
              {
                "x": [
                  1220.04382,
                  53.25946
                ],
                "y": 51.83661
              },
              {
                "x": [
                  634.06733,
                  102.80675
                ],
                "y": 36.69159
              },
              {
                "x": [
                  1084.00209,
                  -10.06146
                ],
                "y": 46.97879
              },
              {
                "x": [
                  672.52891,
                  18.46027
                ],
                "y": 63.99905
              },
              {
                "x": [
                  1015.06022,
                  0.03758
                ],
                "y": 42.67484
              },
              {
                "x": [
                  1126.99945,
                  46.84178
                ],
                "y": 42.79906
              },
              {
                "x": [
                  746.20944,
                  54.34869
                ],
                "y": 58.94339
              },
              {
                "x": [
                  1029.16402,
                  72.67763
                ],
                "y": 61.69144
              },
              {
                "x": [
                  1005.70909,
                  2.04426
                ],
                "y": 47.07186
              },
              {
                "x": [
                  661.75182,
                  42.48556
                ],
                "y": 38.25678
              },
              {
                "x": [
                  1086.23696,
                  63.314
                ],
                "y": 42.67349
              },
              {
                "x": [
                  864.29285,
                  29.05192
                ],
                "y": 44.14401
              },
              {
                "x": [
                  1180.84721,
                  58.89462
                ],
                "y": 45.92971
              },
              {
                "x": [
                  1201.41283,
                  62.965
                ],
                "y": 42.71518
              },
              {
                "x": [
                  1144.17072,
                  56.63308
                ],
                "y": 49.32323
              },
              {
                "x": [
                  689.60419,
                  42.91376
                ],
                "y": 45.95499
              },
              {
                "x": [
                  860.38162,
                  65.66836
                ],
                "y": 46.50969
              },
              {
                "x": [
                  1142.49444,
                  66.39696
                ],
                "y": 41.00935
              },
              {
                "x": [
                  965.90561,
                  42.64188
                ],
                "y": 42.10555
              }
            ],
            "rollback": false,
            "shared": false,
            "type": {
              "items": "Point",
              "type": "array"
            }
          },
          "nNeighbors": {
            "init": 5.0,
            "rollback": false,
            "shared": false,
            "type": "int"
          },
          "validations": {
            "init": [
              {
                "code": "kfold",
                "data": {
                  "average": {
                    "Explained variance": 22.05213,
                    "MAE": 8.44561,
                    "MSE": 119.96113,
                    "R-squared": -0.20766,
                    "RMSE": 10.95268,
                    "type": "RegressionScore"
                  },
                  "folds": {
                    "1": {
                      "Explained variance": 15.80343,
                      "MAE": 8.16452,
                      "MSE": 119.5235,
                      "R-squared": -0.13378,
                      "RMSE": 10.93268,
                      "type": "RegressionScore"
                    },
                    "2": {
                      "Explained variance": 32.45623,
                      "MAE": 8.7267,
                      "MSE": 120.39876,
                      "R-squared": -0.30895,
                      "RMSE": 10.97264,
                      "type": "RegressionScore"
                    }
                  },
                  "type": "KFoldCrossValidationScore"
                },
                "node": "local",
                "validationSpec": {
                  "code": "kfold",
                  "parameters": [
                    {
                      "code": "k",
                      "value": "2"
                    }
                  ]
                }
              }
            ],
            "type": {
              "items": "Record",
              "type": "array"
            }
          }
        },
        "fcns": {
          "C": {
            "do": [
              {
                "a.map": [
                  "categories",
                  {
                    "do": [
                      {
                        "else": [
                          0.0
                        ],
                        "if": {
                          "==": [
                            "cat",
                            "x"
                          ]
                        },
                        "then": [
                          1.0
                        ]
                      }
                    ],
                    "params": [
                      {
                        "cat": "string"
                      }
                    ],
                    "ret": "double"
                  }
                ]
              }
            ],
            "params": [
              {
                "x": "string"
              },
              {
                "categories": {
                  "items": "string",
                  "type": "array"
                }
              }
            ],
            "ret": {
              "items": "double",
              "type": "array"
            }
          },
          "arr": {
            "do": [
              {
                "new": [
                  "x"
                ],
                "type": {
                  "items": "double",
                  "type": "array"
                }
              }
            ],
            "params": [
              {
                "x": "double"
              }
            ],
            "ret": {
              "items": "double",
              "type": "array"
            }
          },
          "standardize": {
            "do": [
              {
                "/": [
                  {
                    "-": [
                      "x",
                      "mu"
                    ]
                  },
                  "sigma"
                ]
              }
            ],
            "params": [
              {
                "x": "double"
              },
              {
                "mu": "double"
              },
              {
                "sigma": "double"
              }
            ],
            "ret": "double"
          }
        },
        "input": {
          "fields": [
            {
              "name": "score_test1",
              "type": "double"
            },
            {
              "name": "college_math",
              "type": "double"
            }
          ],
          "name": "Input",
          "type": "record"
        },
        "method": "map",
        "name": "kNN",
        "output": "double"
      },
      "dataProvenance": [],
      "feedback": [],
      "jobId": "*",
      "node": "local",
      "query": {
        "algorithm": {
          "code": "knn",
          "parameters": [
            {
              "code": "k",
              "value": "5"
            }
          ]
        },
        "covariables": [],
        "covariablesMustExist": false,
        "datasets": [],
        "grouping": [],
        "user": {
          "code": "system"
        },
        "variables": []
      },
      "timestamp": 0.0,
      "type": "application/pfa+json"
    }
  ],
  "dataProvenance": [
    {
      "code": "sample_data"
    }
  ],
  "feedback": [],
  "jobId": "*",
  "node": "local",
  "query": {
    "algorithms": [
      {
        "code": "knn",
        "parameters": [
          {
            "code": "k",
            "value": "5"
          }
        ]
      }
    ],
    "covariables": [
      {
        "code": "score_test1"
      },
      {
        "code": "college_math"
      }
    ],
    "covariablesMustExist": true,
    "filters": {
      "condition": "AND",
      "rules": [
        {
          "field": "cognitive_task2",
          "id": "cognitive_task2",
          "input": "text",
          "operator": "is_not_null",
          "type": "string",
          "value": []
        },
        {
          "field": "score_test1",
          "id": "score_test1",
          "input": "text",
          "operator": "is_not_null",
          "type": "string",
          "value": []
        },
        {
          "field": "college_math",
          "id": "college_math",
          "input": "text",
          "operator": "is_not_null",
          "type": "string",
          "value": []
        }
      ]
    },
    "grouping": [],
    "targetTable": {
      "database": "features",
      "dbSchema": "public",
      "name": "sample_data"
    },
    "testingDatasets": [],
    "trainingDatasets": [],
    "user": {
      "code": "test1"
    },
    "validationDatasets": [],
    "validations": [
      {
        "code": "kfold",
        "parameters": [
          {
            "code": "k",
            "value": "2"
          }
        ]
      }
    ],
    "variables": [
      {
        "code": "cognitive_task2"
      }
    ]
  },
  "timestamp": 0.0,
  "type": "application/vnd.hbp.mip.experiment.pfa+json"
}
