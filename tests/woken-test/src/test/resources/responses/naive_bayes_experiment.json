{
  "data": [
    {
      "algorithm": "python-sgd-naive-bayes",
      "algorithmSpec": {
        "code": "naiveBayes",
        "parameters": []
      },
      "data": {
        "action": [
          {
            "let": {
              "x": {
                "a.flatten": [
                  {
                    "new": [
                      {
                        "u.arr": [
                          {
                            "cast.double": [
                              {
                                "attr": "input",
                                "path": [
                                  {
                                    "string": "lefthippocampus"
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      }
                    ],
                    "type": {
                      "items": {
                        "items": "double",
                        "type": "array"
                      },
                      "type": "array"
                    }
                  }
                ]
              }
            }
          },
          {
            "let": {
              "gaussFeatures": {
                "else": [
                  0.0
                ],
                "if": {
                  ">": [
                    {
                      "a.len": [
                        {
                          "cell": "gaussModel"
                        }
                      ]
                    },
                    0.0
                  ]
                },
                "then": [
                  {
                    "a.len": [
                      {
                        "cell": "gaussModel",
                        "path": [
                          0.0,
                          {
                            "string": "stats"
                          }
                        ]
                      }
                    ]
                  }
                ]
              }
            }
          },
          {
            "let": {
              "gaussianLL": {
                "a.map": [
                  {
                    "cell": "gaussModel"
                  },
                  {
                    "do": [
                      {
                        "model.naive.gaussian": [
                          {
                            "a.subseq": [
                              "x",
                              0.0,
                              "gaussFeatures"
                            ]
                          },
                          {
                            "attr": "dist",
                            "path": [
                              {
                                "string": "stats"
                              }
                            ]
                          }
                        ]
                      }
                    ],
                    "params": [
                      {
                        "dist": {
                          "fields": [
                            {
                              "name": "stats",
                              "type": {
                                "items": {
                                  "fields": [
                                    {
                                      "name": "mean",
                                      "type": "double"
                                    },
                                    {
                                      "name": "variance",
                                      "type": "double"
                                    }
                                  ],
                                  "name": "M",
                                  "type": "record"
                                },
                                "type": "array"
                              }
                            }
                          ],
                          "name": "GaussianDistribution",
                          "type": "record"
                        }
                      }
                    ],
                    "ret": "double"
                  }
                ]
              }
            }
          },
          {
            "let": {
              "multinomialLL": {
                "a.map": [
                  {
                    "cell": "multinomialModel"
                  },
                  {
                    "do": [
                      {
                        "model.naive.multinomial": [
                          {
                            "a.subseq": [
                              "x",
                              "gaussFeatures",
                              {
                                "a.len": [
                                  "x"
                                ]
                              }
                            ]
                          },
                          {
                            "attr": "dist",
                            "path": [
                              {
                                "string": "logLikelihoods"
                              }
                            ]
                          }
                        ]
                      }
                    ],
                    "params": [
                      {
                        "dist": {
                          "fields": [
                            {
                              "name": "logLikelihoods",
                              "type": {
                                "items": "double",
                                "type": "array"
                              }
                            }
                          ],
                          "name": "MultinomialDistribution",
                          "type": "record"
                        }
                      }
                    ],
                    "ret": "double"
                  }
                ]
              }
            }
          },
          {
            "let": {
              "classLL": {
                "cell": "logPrior"
              }
            }
          },
          {
            "if": {
              ">": [
                {
                  "a.len": [
                    "gaussianLL"
                  ]
                },
                0.0
              ]
            },
            "then": [
              {
                "set": {
                  "classLL": {
                    "la.add": [
                      "classLL",
                      "gaussianLL"
                    ]
                  }
                }
              }
            ]
          },
          {
            "if": {
              ">": [
                {
                  "a.len": [
                    "multinomialLL"
                  ]
                },
                0.0
              ]
            },
            "then": [
              {
                "set": {
                  "classLL": {
                    "la.add": [
                      "classLL",
                      "multinomialLL"
                    ]
                  }
                }
              }
            ]
          },
          {
            "let": {
              "norm": {
                "a.logsumexp": [
                  "classLL"
                ]
              }
            }
          },
          {
            "let": {
              "probs": {
                "a.map": [
                  "classLL",
                  {
                    "do": [
                      {
                        "m.exp": [
                          {
                            "-": [
                              "x",
                              "norm"
                            ]
                          }
                        ]
                      }
                    ],
                    "params": [
                      {
                        "x": "double"
                      }
                    ],
                    "ret": "double"
                  }
                ]
              }
            }
          },
          {
            "cell": "classes",
            "path": [
              {
                "a.argmax": [
                  "probs"
                ]
              }
            ]
          }
        ],
        "cells": {
          "classes": {
            "init": [
              "AD",
              "CN",
              "Other"
            ],
            "rollback": false,
            "shared": false,
            "type": {
              "items": "string",
              "type": "array"
            }
          },
          "gaussModel": {
            "init": [
              {
                "stats": [
                  {
                    "mean": 2.82834,
                    "variance": 0.18417
                  }
                ]
              },
              {
                "stats": [
                  {
                    "mean": 3.12883,
                    "variance": 0.09512
                  }
                ]
              },
              {
                "stats": [
                  {
                    "mean": 2.87676,
                    "variance": 0.01695
                  }
                ]
              }
            ],
            "rollback": false,
            "shared": false,
            "type": {
              "items": "GaussianDistribution",
              "type": "array"
            }
          },
          "logPrior": {
            "init": [
              -1.83579,
              -1.75182,
              -0.40488
            ],
            "rollback": false,
            "shared": false,
            "type": {
              "items": "double",
              "type": "array"
            }
          },
          "multinomialModel": {
            "init": [],
            "rollback": false,
            "shared": false,
            "type": {
              "items": "MultinomialDistribution",
              "type": "array"
            }
          },
          "validations": {
            "init": [
              {
                "code": "kfold",
                "data": {
                  "average": {
                    "Accuracy": 0.66705,
                    "Confusion matrix": {
                      "labels": [
                        "AD",
                        "CN",
                        "Other"
                      ],
                      "values": [
                        [
                          0.0,
                          0.0,
                          274.0
                        ],
                        [
                          0.0,
                          0.0,
                          298.0
                        ],
                        [
                          0.0,
                          0.0,
                          1146.0
                        ]
                      ]
                    },
                    "Weighted F1-score": 0.53383,
                    "Weighted false positive rate": 0.66705,
                    "Weighted precision": 0.44496,
                    "Weighted recall": 0.66705,
                    "type": "PolynomialClassificationScore"
                  },
                  "folds": {
                    "0": {
                      "Accuracy": 0.33411,
                      "Confusion matrix": {
                        "labels": [
                          "AD",
                          "CN",
                          "Other"
                        ],
                        "values": [
                          [
                            0.0,
                            0.0,
                            274.0
                          ],
                          [
                            0.0,
                            0.0,
                            298.0
                          ],
                          [
                            0.0,
                            0.0,
                            287.0
                          ]
                        ]
                      },
                      "Weighted F1-score": 0.16735,
                      "Weighted false positive rate": 0.33411,
                      "Weighted precision": 0.11163,
                      "Weighted recall": 0.33411,
                      "type": "PolynomialClassificationScore"
                    },
                    "1": {
                      "Accuracy": 1.0,
                      "Confusion matrix": {
                        "labels": [
                          "AD",
                          "CN",
                          "Other"
                        ],
                        "values": [
                          [
                            0.0,
                            0.0,
                            0.0
                          ],
                          [
                            0.0,
                            0.0,
                            0.0
                          ],
                          [
                            0.0,
                            0.0,
                            859.0
                          ]
                        ]
                      },
                      "Weighted F1-score": 1.0,
                      "Weighted false positive rate": null,
                      "Weighted precision": 1.0,
                      "Weighted recall": 1.0,
                      "type": "PolynomialClassificationScore"
                    }
                  },
                  "type": "KFoldCrossValidationScore"
                },
                "node": "local",
                "validationSpec": {
                  "code": "kfold",
                  "parameters": [
                    {
                      "code": "k",
                      "value": "2"
                    }
                  ]
                }
              }
            ],
            "type": {
              "items": "Record",
              "type": "array"
            }
          }
        },
        "fcns": {
          "C": {
            "do": [
              {
                "a.map": [
                  "categories",
                  {
                    "do": [
                      {
                        "else": [
                          0.0
                        ],
                        "if": {
                          "==": [
                            "cat",
                            "x"
                          ]
                        },
                        "then": [
                          1.0
                        ]
                      }
                    ],
                    "params": [
                      {
                        "cat": "string"
                      }
                    ],
                    "ret": "double"
                  }
                ]
              }
            ],
            "params": [
              {
                "x": "string"
              },
              {
                "categories": {
                  "items": "string",
                  "type": "array"
                }
              }
            ],
            "ret": {
              "items": "double",
              "type": "array"
            }
          },
          "arr": {
            "do": [
              {
                "new": [
                  "x"
                ],
                "type": {
                  "items": "double",
                  "type": "array"
                }
              }
            ],
            "params": [
              {
                "x": "double"
              }
            ],
            "ret": {
              "items": "double",
              "type": "array"
            }
          },
          "standardize": {
            "do": [
              {
                "/": [
                  {
                    "-": [
                      "x",
                      "mu"
                    ]
                  },
                  "sigma"
                ]
              }
            ],
            "params": [
              {
                "x": "double"
              },
              {
                "mu": "double"
              },
              {
                "sigma": "double"
              }
            ],
            "ret": "double"
          }
        },
        "input": {
          "fields": [
            {
              "name": "lefthippocampus",
              "type": "double"
            }
          ],
          "name": "Input",
          "type": "record"
        },
        "metadata": {
          "X": "{\"lefthippocampus\":{\"count\":1718.0,\"mean\":2.9127631548,\"std\":0.259451083,\"min\":1.3047,\"25%\":2.8672,\"50%\":2.8672,\"75%\":2.88555,\"max\":4.4519}}",
          "score": "0.7590221187",
          "y": "{\"count\":1718,\"unique\":3,\"top\":\"Other\",\"freq\":1146}"
        },
        "method": "map",
        "name": "naive_bayes",
        "output": "string"
      },
      "jobId": "*",
      "node": "local",
      "timestamp": 0.0,
      "type": "application/pfa+json"
    }
  ],
  "jobId": "*",
  "node": "local",
  "timestamp": 0.0,
  "type": "application/vnd.hbp.mip.experiment.pfa+json"
}
