{
  "data": [
    {
      "algorithm": "python-sgd-naive-bayes",
      "data": {
        "action": [
          {
            "let": {
              "x": {
                "a.flatten": [
                  {
                    "new": [
                      {
                        "u.arr": [
                          {
                            "cast.double": [
                              {
                                "attr": "input",
                                "path": [
                                  {
                                    "string": "lefthippocampus"
                                  }
                                ]
                              }
                            ]
                          }
                        ]
                      }
                    ],
                    "type": {
                      "items": {
                        "items": "double",
                        "type": "array"
                      },
                      "type": "array"
                    }
                  }
                ]
              }
            }
          },
          {
            "let": {
              "gaussFeatures": {
                "else": [
                  0
                ],
                "if": {
                  ">": [
                    {
                      "a.len": [
                        {
                          "cell": "gaussModel"
                        }
                      ]
                    },
                    0
                  ]
                },
                "then": [
                  {
                    "a.len": [
                      {
                        "cell": "gaussModel",
                        "path": [
                          0,
                          {
                            "string": "stats"
                          }
                        ]
                      }
                    ]
                  }
                ]
              }
            }
          },
          {
            "let": {
              "gaussianLL": {
                "a.map": [
                  {
                    "cell": "gaussModel"
                  },
                  {
                    "do": [
                      {
                        "model.naive.gaussian": [
                          {
                            "a.subseq": [
                              "x",
                              0,
                              "gaussFeatures"
                            ]
                          },
                          {
                            "attr": "dist",
                            "path": [
                              {
                                "string": "stats"
                              }
                            ]
                          }
                        ]
                      }
                    ],
                    "params": [
                      {
                        "dist": {
                          "fields": [
                            {
                              "name": "stats",
                              "type": {
                                "items": {
                                  "fields": [
                                    {
                                      "name": "mean",
                                      "type": "double"
                                    },
                                    {
                                      "name": "variance",
                                      "type": "double"
                                    }
                                  ],
                                  "name": "M",
                                  "type": "record"
                                },
                                "type": "array"
                              }
                            }
                          ],
                          "name": "GaussianDistribution",
                          "type": "record"
                        }
                      }
                    ],
                    "ret": "double"
                  }
                ]
              }
            }
          },
          {
            "let": {
              "multinomialLL": {
                "a.map": [
                  {
                    "cell": "multinomialModel"
                  },
                  {
                    "do": [
                      {
                        "model.naive.multinomial": [
                          {
                            "a.subseq": [
                              "x",
                              "gaussFeatures",
                              {
                                "a.len": [
                                  "x"
                                ]
                              }
                            ]
                          },
                          {
                            "attr": "dist",
                            "path": [
                              {
                                "string": "logLikelihoods"
                              }
                            ]
                          }
                        ]
                      }
                    ],
                    "params": [
                      {
                        "dist": {
                          "fields": [
                            {
                              "name": "logLikelihoods",
                              "type": {
                                "items": "double",
                                "type": "array"
                              }
                            }
                          ],
                          "name": "MultinomialDistribution",
                          "type": "record"
                        }
                      }
                    ],
                    "ret": "double"
                  }
                ]
              }
            }
          },
          {
            "let": {
              "classLL": {
                "cell": "logPrior"
              }
            }
          },
          {
            "if": {
              ">": [
                {
                  "a.len": [
                    "gaussianLL"
                  ]
                },
                0
              ]
            },
            "then": [
              {
                "set": {
                  "classLL": {
                    "la.add": [
                      "classLL",
                      "gaussianLL"
                    ]
                  }
                }
              }
            ]
          },
          {
            "if": {
              ">": [
                {
                  "a.len": [
                    "multinomialLL"
                  ]
                },
                0
              ]
            },
            "then": [
              {
                "set": {
                  "classLL": {
                    "la.add": [
                      "classLL",
                      "multinomialLL"
                    ]
                  }
                }
              }
            ]
          },
          {
            "let": {
              "norm": {
                "a.logsumexp": [
                  "classLL"
                ]
              }
            }
          },
          {
            "let": {
              "probs": {
                "a.map": [
                  "classLL",
                  {
                    "do": [
                      {
                        "m.exp": [
                          {
                            "-": [
                              "x",
                              "norm"
                            ]
                          }
                        ]
                      }
                    ],
                    "params": [
                      {
                        "x": "double"
                      }
                    ],
                    "ret": "double"
                  }
                ]
              }
            }
          },
          {
            "cell": "classes",
            "path": [
              {
                "a.argmax": [
                  "probs"
                ]
              }
            ]
          }
        ],
        "cells": {
          "classes": {
            "init": [
              "AD",
              "CN",
              "Other"
            ],
            "rollback": false,
            "shared": false,
            "type": {
              "items": "string",
              "type": "array"
            }
          },
          "gaussModel": {
            "init": [
              {
                "stats": [
                  {
                    "mean": 2.8283350365,
                    "variance": 0.1841676574
                  }
                ]
              },
              {
                "stats": [
                  {
                    "mean": 3.1288281879,
                    "variance": 0.0951158223
                  }
                ]
              },
              {
                "stats": [
                  {
                    "mean": 2.8767648342,
                    "variance": 0.0169486292
                  }
                ]
              }
            ],
            "rollback": false,
            "shared": false,
            "type": {
              "items": "GaussianDistribution",
              "type": "array"
            }
          },
          "logPrior": {
            "init": [
              -1.8357879962,
              -1.751822616,
              -0.4048832053
            ],
            "rollback": false,
            "shared": false,
            "type": {
              "items": "double",
              "type": "array"
            }
          },
          "multinomialModel": {
            "init": [],
            "rollback": false,
            "shared": false,
            "type": {
              "items": "MultinomialDistribution",
              "type": "array"
            }
          },
          "validations": [
            {
              "code": "kfold",
              "data": {
                "average": {
                  "Accuracy": 0.6670547147846333,
                  "Confusion matrix": {
                    "labels": [
                      "AD",
                      "CN",
                      "Other"
                    ],
                    "values": [
                      [
                        0.0,
                        0.0,
                        274.0
                      ],
                      [
                        0.0,
                        0.0,
                        298.0
                      ],
                      [
                        0.0,
                        0.0,
                        1146.0
                      ]
                    ]
                  },
                  "Weighted F1-score": 0.533830099960328,
                  "Weighted false positive rate": 0.6670547147846333,
                  "Weighted precision": 0.44496199251640844,
                  "Weighted recall": 0.6670547147846333,
                  "type": "PolynomialClassificationScore"
                },
                "folds": {
                  "0": {
                    "Accuracy": 0.3341094295692666,
                    "Confusion matrix": {
                      "labels": [
                        "AD",
                        "CN",
                        "Other"
                      ],
                      "values": [
                        [
                          0.0,
                          0.0,
                          274.0
                        ],
                        [
                          0.0,
                          0.0,
                          298.0
                        ],
                        [
                          0.0,
                          0.0,
                          287.0
                        ]
                      ]
                    },
                    "Weighted F1-score": 0.16734625878949305,
                    "Weighted false positive rate": 0.3341094295692666,
                    "Weighted precision": 0.1116291109271007,
                    "Weighted recall": 0.3341094295692666,
                    "type": "PolynomialClassificationScore"
                  },
                  "1": {
                    "Accuracy": 1.0,
                    "Confusion matrix": {
                      "labels": [
                        "AD",
                        "CN",
                        "Other"
                      ],
                      "values": [
                        [
                          0.0,
                          0.0,
                          0.0
                        ],
                        [
                          0.0,
                          0.0,
                          0.0
                        ],
                        [
                          0.0,
                          0.0,
                          859.0
                        ]
                      ]
                    },
                    "Weighted F1-score": 1.0,
                    "Weighted false positive rate": null,
                    "Weighted precision": 1.0,
                    "Weighted recall": 1.0,
                    "type": "PolynomialClassificationScore"
                  }
                },
                "type": "KFoldCrossValidationScore"
              },
              "node": "local"
            }
          ]
        },
        "fcns": {
          "C": {
            "do": [
              {
                "a.map": [
                  "categories",
                  {
                    "do": [
                      {
                        "else": [
                          0
                        ],
                        "if": {
                          "==": [
                            "cat",
                            "x"
                          ]
                        },
                        "then": [
                          1
                        ]
                      }
                    ],
                    "params": [
                      {
                        "cat": "string"
                      }
                    ],
                    "ret": "double"
                  }
                ]
              }
            ],
            "params": [
              {
                "x": "string"
              },
              {
                "categories": {
                  "items": "string",
                  "type": "array"
                }
              }
            ],
            "ret": {
              "items": "double",
              "type": "array"
            }
          },
          "arr": {
            "do": [
              {
                "new": [
                  "x"
                ],
                "type": {
                  "items": "double",
                  "type": "array"
                }
              }
            ],
            "params": [
              {
                "x": "double"
              }
            ],
            "ret": {
              "items": "double",
              "type": "array"
            }
          },
          "standardize": {
            "do": [
              {
                "/": [
                  {
                    "-": [
                      "x",
                      "mu"
                    ]
                  },
                  "sigma"
                ]
              }
            ],
            "params": [
              {
                "x": "double"
              },
              {
                "mu": "double"
              },
              {
                "sigma": "double"
              }
            ],
            "ret": "double"
          }
        },
        "input": {
          "fields": [
            {
              "name": "lefthippocampus",
              "type": "double"
            }
          ],
          "name": "Input",
          "type": "record"
        },
        "metadata": {
          "X": "{\"lefthippocampus\":{\"count\":1718.0,\"mean\":2.9127631548,\"std\":0.259451083,\"min\":1.3047,\"25%\":2.8672,\"75%\":2.88555,\"max\":4.4519}}",
          "estimator": "{\"py/object\": \"sklearn_to_pfa.mixed_nb.MixedNB\", \"py/state\": {\"gauss_nb\": {\"py/object\": \"sklearn.naive_bayes.GaussianNB\", \"py/state\": {\"_sklearn_version\": \"0.19.1\", \"class_count_\": {\"py/object\": \"numpy.ndarray\", \"dtype\": \"float64\", \"values\": [274.0, 298.0, 1146.0]}, \"class_prior_\": {\"py/object\": \"numpy.ndarray\", \"dtype\": \"float64\", \"values\": [0.15948777648428406, 0.17345750873108265, 0.6670547147846333]}, \"classes_\": {\"py/object\": \"numpy.ndarray\", \"dtype\": \"<U5\", \"values\": [\"AD\", \"CN\", \"Other\"]}, \"priors\": null, \"sigma_\": {\"py/object\": \"numpy.ndarray\", \"dtype\": \"float64\", \"values\": [[0.18416765737986562], [0.09511582229285113], [0.016948629205860762]]}, \"theta_\": {\"py/object\": \"numpy.ndarray\", \"dtype\": \"float64\", \"values\": [[2.8283350364963504], [3.1288281879194626], [2.8767648342059338]]}}}, \"is_nominal\": [false], \"multi_nb\": {\"py/object\": MultinomialNB\", \"py/state\": {\"_sklearn_version\": \"0.19.1\", \"alpha\": 1.0, \"class_prior\": null, \"fit_prior\": true}}}}",
          "score": "0.7590221187",
          "y": "{\"count\":1718,\"unique\":3,\"top\":\"Other\",\"freq\":1146}"
        },
        "method": "map",
        "name": "naive_bayes",
        "output": "string"
      },
      "jobId": "*",
      "node": "local",
      "timestamp": 0.0,
      "type": "application/pfa+json"
    }
  ],
  "jobId": "*",
  "node": "local",
  "timestamp": 0.0,
  "type": "application/vnd.hbp.mip.experiment.pfa+json"
}
