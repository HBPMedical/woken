{
  "algorithm": "python-knn",
  "data": {
    "action": [
      {
        "let": {
          "x": {
            "a.flatten": [
              {
                "new": [
                  {
                    "u.arr": [
                      {
                        "/": [
                          {
                            "-": [
                              {
                                "cast.double": [
                                  {
                                    "attr": "input",
                                    "path": [
                                      {
                                        "string": "score_math_course1"
                                      }
                                    ]
                                  }
                                ]
                              },
                              0.0
                            ]
                          },
                          1.0
                        ]
                      }
                    ]
                  }
                ],
                "type": {
                  "items": {
                    "items": "double",
                    "type": "array"
                  },
                  "type": "array"
                }
              }
            ]
          }
        }
      },
      {
        "let": {
          "neighbors": {
            "model.neighbor.nearestK": [
              {
                "cell": "nNeighbors"
              },
              "x",
              {
                "cell": "codebook"
              },
              {
                "do": [
                  {
                    "metric.simpleEuclidean": [
                      "x",
                      {
                        "attr": "p",
                        "path": [
                          {
                            "string": "x"
                          }
                        ]
                      }
                    ]
                  }
                ],
                "params": [
                  {
                    "x": {
                      "items": "double",
                      "type": "array"
                    }
                  },
                  {
                    "p": {
                      "fields": [
                        {
                          "name": "x",
                          "type": {
                            "items": "double",
                            "type": "array"
                          }
                        },
                        {
                          "name": "y",
                          "type": "double"
                        }
                      ],
                      "name": "Point",
                      "type": "record"
                    }
                  }
                ],
                "ret": "double"
              }
            ]
          }
        }
      },
      {
        "a.mean": [
          {
            "a.map": [
              "neighbors",
              {
                "do": [
                  {
                    "attr": "p",
                    "path": [
                      {
                        "string": "y"
                      }
                    ]
                  }
                ],
                "params": [
                  {
                    "p": "Point"
                  }
                ],
                "ret": "double"
              }
            ]
          }
        ]
      }
    ],
    "cells": {
      "codebook": {
        "init": [
          {
            "x": [
              4.52455
            ],
            "y": 47.25508
          },
          {
            "x": [
              89.6065
            ],
            "y": 43.92815
          },
          {
            "x": [
              80.13479
            ],
            "y": 43.20178
          },
          {
            "x": [
              8.17461
            ],
            "y": 48.04308
          },
          {
            "x": [
              16.1271
            ],
            "y": 42.79639
          },
          {
            "x": [
              37.91542
            ],
            "y": 47.68982
          },
          {
            "x": [
              8.16161
            ],
            "y": 41.12188
          },
          {
            "x": [
              52.97741
            ],
            "y": 42.79906
          },
          {
            "x": [
              39.91281
            ],
            "y": 35.38481
          },
          {
            "x": [
              8.79419
            ],
            "y": 42.67484
          },
          {
            "x": [
              10.87723
            ],
            "y": 42.15951
          },
          {
            "x": [
              94.37967
            ],
            "y": 47.48177
          },
          {
            "x": [
              5.16135
            ],
            "y": 39.32453
          },
          {
            "x": [
              37.60232
            ],
            "y": 43.76652
          },
          {
            "x": [
              31.58625
            ],
            "y": 42.10555
          },
          {
            "x": [
              63.73614
            ],
            "y": 46.34525
          },
          {
            "x": [
              47.85153
            ],
            "y": 40.81027
          },
          {
            "x": [
              58.47137
            ],
            "y": 36.71821
          },
          {
            "x": [
              14.07133
            ],
            "y": 41.75611
          },
          {
            "x": [
              8.18211
            ],
            "y": 39.32205
          },
          {
            "x": [
              3.66617
            ],
            "y": 44.92554
          },
          {
            "x": [
              84.24702
            ],
            "y": 43.64524
          },
          {
            "x": [
              77.73674
            ],
            "y": 43.09964
          },
          {
            "x": [
              83.70121
            ],
            "y": 40.29944
          },
          {
            "x": [
              19.6252
            ],
            "y": 42.49557
          },
          {
            "x": [
              59.47755
            ],
            "y": 41.00935
          },
          {
            "x": [
              66.95864
            ],
            "y": 41.45865
          },
          {
            "x": [
              98.85547
            ],
            "y": 41.36833
          },
          {
            "x": [
              75.73068
            ],
            "y": 46.62716
          },
          {
            "x": [
              42.5306
            ],
            "y": 41.19771
          },
          {
            "x": [
              59.42538
            ],
            "y": 42.67349
          },
          {
            "x": [
              43.48432
            ],
            "y": 38.25678
          },
          {
            "x": [
              85.19923
            ],
            "y": 37.86655
          },
          {
            "x": [
              46.7679
            ],
            "y": 37.35481
          },
          {
            "x": [
              23.65996
            ],
            "y": 49.22548
          },
          {
            "x": [
              60.39532
            ],
            "y": 42.71518
          },
          {
            "x": [
              6.82058
            ],
            "y": 40.53545
          },
          {
            "x": [
              69.18135
            ],
            "y": 38.82883
          },
          {
            "x": [
              54.47622
            ],
            "y": 42.13165
          },
          {
            "x": [
              43.71273
            ],
            "y": 44.35097
          },
          {
            "x": [
              97.29791
            ],
            "y": 51.02922
          },
          {
            "x": [
              33.608
            ],
            "y": 44.36032
          },
          {
            "x": [
              44.67928
            ],
            "y": 40.01459
          },
          {
            "x": [
              42.74006
            ],
            "y": 49.62613
          },
          {
            "x": [
              20.67531
            ],
            "y": 44.14401
          },
          {
            "x": [
              12.82435
            ],
            "y": 40.66483
          },
          {
            "x": [
              58.80008
            ],
            "y": 42.56994
          },
          {
            "x": [
              97.21102
            ],
            "y": 47.05947
          },
          {
            "x": [
              51.82268
            ],
            "y": 45.95499
          },
          {
            "x": [
              77.22982
            ],
            "y": 40.87648
          },
          {
            "x": [
              89.05857
            ],
            "y": 40.08518
          },
          {
            "x": [
              28.7433
            ],
            "y": 40.98214
          },
          {
            "x": [
              60.06391
            ],
            "y": 45.92971
          },
          {
            "x": [
              65.09589
            ],
            "y": 43.0341
          },
          {
            "x": [
              79.84549
            ],
            "y": 41.85322
          },
          {
            "x": [
              69.16027
            ],
            "y": 45.11835
          },
          {
            "x": [
              61.03088
            ],
            "y": 37.65017
          },
          {
            "x": [
              79.81673
            ],
            "y": 46.35847
          },
          {
            "x": [
              71.60712
            ],
            "y": 45.984
          },
          {
            "x": [
              42.14113
            ],
            "y": 43.09641
          },
          {
            "x": [
              97.74419
            ],
            "y": 40.06381
          },
          {
            "x": [
              57.70153
            ],
            "y": 45.70532
          },
          {
            "x": [
              68.61314
            ],
            "y": 43.19153
          },
          {
            "x": [
              85.61818
            ],
            "y": 45.75225
          },
          {
            "x": [
              31.19426
            ],
            "y": 47.25349
          },
          {
            "x": [
              62.35812
            ],
            "y": 46.58424
          },
          {
            "x": [
              86.34141
            ],
            "y": 45.33491
          },
          {
            "x": [
              60.72058
            ],
            "y": 40.86019
          },
          {
            "x": [
              48.37303
            ],
            "y": 46.61177
          },
          {
            "x": [
              87.02556
            ],
            "y": 36.69159
          },
          {
            "x": [
              36.25718
            ],
            "y": 39.41501
          },
          {
            "x": [
              52.00621
            ],
            "y": 44.4011
          },
          {
            "x": [
              37.23827
            ],
            "y": 51.1732
          },
          {
            "x": [
              60.1413
            ],
            "y": 47.90339
          },
          {
            "x": [
              42.97013
            ],
            "y": 43.34128
          },
          {
            "x": [
              62.1147
            ],
            "y": 51.42428
          },
          {
            "x": [
              53.82948
            ],
            "y": 46.78503
          },
          {
            "x": [
              91.67556
            ],
            "y": 42.02298
          },
          {
            "x": [
              59.16042
            ],
            "y": 39.59999
          },
          {
            "x": [
              28.44651
            ],
            "y": 47.45919
          },
          {
            "x": [
              2.55087
            ],
            "y": 46.97879
          },
          {
            "x": [
              90.29346
            ],
            "y": 51.34721
          },
          {
            "x": [
              62.10507
            ],
            "y": 45.63748
          },
          {
            "x": [
              84.78114
            ],
            "y": 48.85747
          },
          {
            "x": [
              18.25542
            ],
            "y": 48.42886
          },
          {
            "x": [
              78.47786
            ],
            "y": 48.84819
          },
          {
            "x": [
              87.81157
            ],
            "y": 55.39562
          },
          {
            "x": [
              84.90969
            ],
            "y": 49.2224
          },
          {
            "x": [
              31.55072
            ],
            "y": 50.58429
          },
          {
            "x": [
              63.74689
            ],
            "y": 49.32323
          },
          {
            "x": [
              13.42256
            ],
            "y": 46.17361
          },
          {
            "x": [
              78.29103
            ],
            "y": 47.32367
          },
          {
            "x": [
              88.27341
            ],
            "y": 52.25089
          },
          {
            "x": [
              94.91508
            ],
            "y": 53.54295
          },
          {
            "x": [
              29.34348
            ],
            "y": 51.37613
          },
          {
            "x": [
              67.59285
            ],
            "y": 47.41253
          },
          {
            "x": [
              64.3807
            ],
            "y": 52.78033
          },
          {
            "x": [
              33.88852
            ],
            "y": 45.65756
          },
          {
            "x": [
              85.50381
            ],
            "y": 44.94977
          },
          {
            "x": [
              10.07107
            ],
            "y": 47.07186
          },
          {
            "x": [
              87.05
            ],
            "y": 52.3521
          },
          {
            "x": [
              1.76352
            ],
            "y": 50.12754
          },
          {
            "x": [
              33.36147
            ],
            "y": 51.89914
          },
          {
            "x": [
              63.66752
            ],
            "y": 51.70116
          },
          {
            "x": [
              69.48224
            ],
            "y": 46.50969
          },
          {
            "x": [
              22.57261
            ],
            "y": 50.33406
          },
          {
            "x": [
              53.47788
            ],
            "y": 57.27077
          },
          {
            "x": [
              76.84294
            ],
            "y": 46.01806
          },
          {
            "x": [
              54.23375
            ],
            "y": 53.10736
          },
          {
            "x": [
              78.70947
            ],
            "y": 52.92075
          },
          {
            "x": [
              57.29536
            ],
            "y": 58.94339
          },
          {
            "x": [
              16.39982
            ],
            "y": 55.34824
          },
          {
            "x": [
              1.11312
            ],
            "y": 52.82686
          },
          {
            "x": [
              2.69596
            ],
            "y": 57.84869
          },
          {
            "x": [
              54.37908
            ],
            "y": 59.45803
          },
          {
            "x": [
              79.64227
            ],
            "y": 51.28829
          },
          {
            "x": [
              41.36299
            ],
            "y": 63.59952
          },
          {
            "x": [
              90.01428
            ],
            "y": 61.45684
          },
          {
            "x": [
              69.43153
            ],
            "y": 54.04766
          },
          {
            "x": [
              83.57578
            ],
            "y": 53.48718
          },
          {
            "x": [
              51.53185
            ],
            "y": 50.83364
          },
          {
            "x": [
              93.90403
            ],
            "y": 56.43016
          },
          {
            "x": [
              33.53157
            ],
            "y": 58.93581
          },
          {
            "x": [
              26.79791
            ],
            "y": 54.56319
          },
          {
            "x": [
              49.71478
            ],
            "y": 51.83661
          },
          {
            "x": [
              2.57234
            ],
            "y": 54.16052
          },
          {
            "x": [
              42.36209
            ],
            "y": 60.00344
          },
          {
            "x": [
              29.31908
            ],
            "y": 66.66467
          },
          {
            "x": [
              45.00159
            ],
            "y": 64.97017
          },
          {
            "x": [
              17.62979
            ],
            "y": 62.8885
          },
          {
            "x": [
              98.80711
            ],
            "y": 60.89192
          },
          {
            "x": [
              82.13095
            ],
            "y": 62.22827
          },
          {
            "x": [
              66.97767
            ],
            "y": 68.25699
          },
          {
            "x": [
              67.83557
            ],
            "y": 61.69144
          },
          {
            "x": [
              17.05049
            ],
            "y": 62.8049
          },
          {
            "x": [
              78.47134
            ],
            "y": 64.94039
          },
          {
            "x": [
              48.84283
            ],
            "y": 61.96754
          },
          {
            "x": [
              99.64204
            ],
            "y": 72.82121
          },
          {
            "x": [
              16.3254
            ],
            "y": 63.99905
          },
          {
            "x": [
              75.15636
            ],
            "y": 63.47606
          },
          {
            "x": [
              19.0778
            ],
            "y": 76.39517
          },
          {
            "x": [
              33.42793
            ],
            "y": 77.66904
          },
          {
            "x": [
              40.69329
            ],
            "y": 69.05797
          },
          {
            "x": [
              30.16649
            ],
            "y": 74.38293
          },
          {
            "x": [
              38.91848
            ],
            "y": 71.15359
          },
          {
            "x": [
              17.21113
            ],
            "y": 75.73959
          },
          {
            "x": [
              72.59342
            ],
            "y": 76.75765
          },
          {
            "x": [
              25.0445
            ],
            "y": 72.38548
          },
          {
            "x": [
              62.33187
            ],
            "y": 80.4739
          },
          {
            "x": [
              20.79439
            ],
            "y": 75.19529
          }
        ],
        "rollback": false,
        "shared": false,
        "type": {
          "items": "Point",
          "type": "array"
        }
      },
      "nNeighbors": {
        "init": 5.0,
        "rollback": false,
        "shared": false,
        "type": "int"
      }
    },
    "fcns": {
      "C": {
        "do": [
          {
            "a.map": [
              "categories",
              {
                "do": [
                  {
                    "else": [
                      0.0
                    ],
                    "if": {
                      "==": [
                        "cat",
                        "x"
                      ]
                    },
                    "then": [
                      1.0
                    ]
                  }
                ],
                "params": [
                  {
                    "cat": "string"
                  }
                ],
                "ret": "double"
              }
            ]
          }
        ],
        "params": [
          {
            "x": "string"
          },
          {
            "categories": {
              "items": "string",
              "type": "array"
            }
          }
        ],
        "ret": {
          "items": "double",
          "type": "array"
        }
      },
      "arr": {
        "do": [
          {
            "new": [
              "x"
            ],
            "type": {
              "items": "double",
              "type": "array"
            }
          }
        ],
        "params": [
          {
            "x": "double"
          }
        ],
        "ret": {
          "items": "double",
          "type": "array"
        }
      },
      "standardize": {
        "do": [
          {
            "/": [
              {
                "-": [
                  "x",
                  "mu"
                ]
              },
              "sigma"
            ]
          }
        ],
        "params": [
          {
            "x": "double"
          },
          {
            "mu": "double"
          },
          {
            "sigma": "double"
          }
        ],
        "ret": "double"
      }
    },
    "input": {
      "fields": [
        {
          "name": "score_math_course1",
          "type": "double"
        }
      ],
      "name": "Input",
      "type": "record"
    },
    "method": "map",
    "name": "kNN",
    "output": "double"
  },
  "dataProvenance": [
    {
      "code": "sample_data"
    }
  ],
  "feedback": [],
  "jobId": "*",
  "node": "local",
  "query": {
    "algorithm": {
      "code": "knn",
      "parameters": [
        {
          "code": "k",
          "value": "5"
        }
      ]
    },
    "covariables": [
      {
        "code": "score_math_course1"
      }
    ],
    "covariablesMustExist": true,
    "datasets": [],
    "grouping": [],
    "targetTable": "sample_data",
    "user": {
      "code": "test1"
    },
    "variables": [
      {
        "code": "cognitive_task2"
      }
    ]
  },
  "timestamp": 0.0,
  "type": "application/pfa+json"
}
