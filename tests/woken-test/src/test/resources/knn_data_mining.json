{
  "action": [
    {
      "let": {
        "model": {
          "cell": "model"
        }
      }
    },
    {
      "let": {
        "knn": {
          "model.neighbor.nearestK": [
            "model.k",
            {
              "u.toArray": [
                "input"
              ]
            },
            "model.samples",
            {
              "do": {
                "metric.simpleEuclidean": [
                  "x",
                  "y.vars"
                ]
              },
              "params": [
                {
                  "x": {
                    "items": "double",
                    "type": "array"
                  }
                },
                {
                  "y": "sample"
                }
              ],
              "ret": "double"
            }
          ]
        }
      }
    },
    {
      "let": {
        "label_list": {
          "type": {
            "items": "double",
            "type": "array"
          },
          "value": []
        }
      }
    },
    {
      "do": [
        {
          "set": {
            "label_list": {
              "a.append": [
                "label_list",
                "neighbour.label"
              ]
            }
          }
        }
      ],
      "foreach": "neighbour",
      "in": "knn"
    },
    {
      "a.mean": [
        "label_list"
      ]
    }
  ],
  "begin": [],
  "cells": {
    "model": {
      "init": {
        "k": 5,
        "samples": [
          {
            "label": 47.255081449,
            "vars": [
              4.5245546731
            ]
          },
          {
            "label": 43.9281508027,
            "vars": [
              89.6064960542
            ]
          },
          {
            "label": 43.2017809317,
            "vars": [
              80.1347922534
            ]
          },
          {
            "label": 48.0430759808,
            "vars": [
              8.1746120832
            ]
          },
          {
            "label": 42.7963941018,
            "vars": [
              16.1271003808
            ]
          },
          {
            "label": 47.6898181248,
            "vars": [
              37.9154161417
            ]
          },
          {
            "label": 41.1218845341,
            "vars": [
              8.1616111752
            ]
          },
          {
            "label": 42.799063386,
            "vars": [
              52.9774085328
            ]
          },
          {
            "label": 35.3848051833,
            "vars": [
              39.9128107028
            ]
          },
          {
            "label": 42.6748370061,
            "vars": [
              8.7941925002
            ]
          },
          {
            "label": 42.1595104892,
            "vars": [
              10.8772310345
            ]
          },
          {
            "label": 47.4817658724,
            "vars": [
              94.3796735669
            ]
          },
          {
            "label": 39.3245277443,
            "vars": [
              5.1613513096
            ]
          },
          {
            "label": 43.7665170958,
            "vars": [
              37.6023178329
            ]
          },
          {
            "label": 42.1055474044,
            "vars": [
              31.5862496358
            ]
          },
          {
            "label": 46.3452458799,
            "vars": [
              63.7361371161
            ]
          },
          {
            "label": 40.8102670269,
            "vars": [
              47.8515278457
            ]
          },
          {
            "label": 36.7182068067,
            "vars": [
              58.4713657936
            ]
          },
          {
            "label": 41.7561114689,
            "vars": [
              14.0713335692
            ]
          },
          {
            "label": 39.3220451398,
            "vars": [
              8.1821058525
            ]
          },
          {
            "label": 44.9255409406,
            "vars": [
              3.6661713223
            ]
          },
          {
            "label": 43.6452404035,
            "vars": [
              84.2470159775
            ]
          },
          {
            "label": 43.0996406928,
            "vars": [
              77.7367387372
            ]
          },
          {
            "label": 40.2994403293,
            "vars": [
              83.7012071421
            ]
          },
          {
            "label": 42.4955728618,
            "vars": [
              19.6252003929
            ]
          },
          {
            "label": 41.0093516286,
            "vars": [
              59.4775523602
            ]
          },
          {
            "label": 41.4586489308,
            "vars": [
              66.9586441081
            ]
          },
          {
            "label": 41.3683317524,
            "vars": [
              98.8554712322
            ]
          },
          {
            "label": 46.6271629788,
            "vars": [
              75.7306828664
            ]
          },
          {
            "label": 41.1977091391,
            "vars": [
              42.5305997459
            ]
          },
          {
            "label": 42.6734948069,
            "vars": [
              59.4253758281
            ]
          },
          {
            "label": 38.2567759932,
            "vars": [
              43.4843228972
            ]
          },
          {
            "label": 37.8665546505,
            "vars": [
              85.1992348244
            ]
          },
          {
            "label": 37.3548118741,
            "vars": [
              46.767896205
            ]
          },
          {
            "label": 49.2254841113,
            "vars": [
              23.6599556238
            ]
          },
          {
            "label": 42.7151777102,
            "vars": [
              60.395319982
            ]
          },
          {
            "label": 40.5354538031,
            "vars": [
              6.8205805249
            ]
          },
          {
            "label": 38.8288255211,
            "vars": [
              69.1813510389
            ]
          },
          {
            "label": 42.1316498056,
            "vars": [
              54.476217618
            ]
          },
          {
            "label": 44.3509658334,
            "vars": [
              43.7127344399
            ]
          },
          {
            "label": 51.0292189608,
            "vars": [
              97.2979085534
            ]
          },
          {
            "label": 44.3603185853,
            "vars": [
              33.6080028771
            ]
          },
          {
            "label": 40.0145858987,
            "vars": [
              44.6792816347
            ]
          },
          {
            "label": 49.6261322492,
            "vars": [
              42.7400635586
            ]
          },
          {
            "label": 44.1440076217,
            "vars": [
              20.6753134211
            ]
          },
          {
            "label": 40.6648338166,
            "vars": [
              12.8243515606
            ]
          },
          {
            "label": 42.5699397327,
            "vars": [
              58.8000757492
            ]
          },
          {
            "label": 47.059468878,
            "vars": [
              97.2110197754
            ]
          },
          {
            "label": 45.9549912538,
            "vars": [
              51.8226789993
            ]
          },
          {
            "label": 40.8764793026,
            "vars": [
              77.2298186426
            ]
          },
          {
            "label": 40.0851796238,
            "vars": [
              89.0585701009
            ]
          },
          {
            "label": 40.9821445512,
            "vars": [
              28.7432973119
            ]
          },
          {
            "label": 45.9297145306,
            "vars": [
              60.0639115355
            ]
          },
          {
            "label": 43.034100347,
            "vars": [
              65.095885409
            ]
          },
          {
            "label": 41.8532171342,
            "vars": [
              79.8454933108
            ]
          },
          {
            "label": 45.1183516997,
            "vars": [
              69.1602666674
            ]
          },
          {
            "label": 37.6501673954,
            "vars": [
              61.0308795124
            ]
          },
          {
            "label": 46.3584737361,
            "vars": [
              79.8167307912
            ]
          },
          {
            "label": 45.9839969446,
            "vars": [
              71.6071202252
            ]
          },
          {
            "label": 43.0964136113,
            "vars": [
              42.141129259
            ]
          },
          {
            "label": 40.0638098246,
            "vars": [
              97.7441851196
            ]
          },
          {
            "label": 45.7053249597,
            "vars": [
              57.7015289937
            ]
          },
          {
            "label": 43.1915278571,
            "vars": [
              68.6131366156
            ]
          },
          {
            "label": 45.7522466783,
            "vars": [
              85.6181837481
            ]
          },
          {
            "label": 47.2534926372,
            "vars": [
              31.1942569232
            ]
          },
          {
            "label": 46.5842353433,
            "vars": [
              62.3581209136
            ]
          },
          {
            "label": 45.3349077057,
            "vars": [
              86.341405438
            ]
          },
          {
            "label": 40.8601868347,
            "vars": [
              60.720582268
            ]
          },
          {
            "label": 46.6117695416,
            "vars": [
              48.3730291494
            ]
          },
          {
            "label": 36.6915928029,
            "vars": [
              87.0255579269
            ]
          },
          {
            "label": 39.4150098156,
            "vars": [
              36.2571761734
            ]
          },
          {
            "label": 44.401103629,
            "vars": [
              52.0062100543
            ]
          },
          {
            "label": 51.1732012168,
            "vars": [
              37.2382678352
            ]
          },
          {
            "label": 47.9033907585,
            "vars": [
              60.1413000214
            ]
          },
          {
            "label": 43.3412758684,
            "vars": [
              42.9701304538
            ]
          },
          {
            "label": 51.4242761962,
            "vars": [
              62.1146952093
            ]
          },
          {
            "label": 46.7850332629,
            "vars": [
              53.8294764422
            ]
          },
          {
            "label": 42.0229844057,
            "vars": [
              91.6755603843
            ]
          },
          {
            "label": 39.5999862008,
            "vars": [
              59.1604158808
            ]
          },
          {
            "label": 47.4591943936,
            "vars": [
              28.4465080346
            ]
          },
          {
            "label": 46.9787887637,
            "vars": [
              2.5508745844
            ]
          },
          {
            "label": 51.3472088656,
            "vars": [
              90.2934565225
            ]
          },
          {
            "label": 45.6374759833,
            "vars": [
              62.105070008
            ]
          },
          {
            "label": 48.8574696655,
            "vars": [
              84.7811374455
            ]
          },
          {
            "label": 48.4288645224,
            "vars": [
              18.2554196471
            ]
          },
          {
            "label": 48.8481939533,
            "vars": [
              78.4778634515
            ]
          },
          {
            "label": 55.395621187,
            "vars": [
              87.8115692141
            ]
          },
          {
            "label": 49.2224034306,
            "vars": [
              84.9096892904
            ]
          },
          {
            "label": 50.5842894505,
            "vars": [
              31.5507246617
            ]
          },
          {
            "label": 49.3232301792,
            "vars": [
              63.7468924013
            ]
          },
          {
            "label": 46.1736110884,
            "vars": [
              13.4225596164
            ]
          },
          {
            "label": 47.3236730151,
            "vars": [
              78.2910303352
            ]
          },
          {
            "label": 52.2508853306,
            "vars": [
              88.2734075002
            ]
          },
          {
            "label": 53.5429508934,
            "vars": [
              94.9150785871
            ]
          },
          {
            "label": 51.3761255696,
            "vars": [
              29.343476278
            ]
          },
          {
            "label": 47.4125325146,
            "vars": [
              67.5928469019
            ]
          },
          {
            "label": 52.7803306145,
            "vars": [
              64.3807036867
            ]
          },
          {
            "label": 45.6575596663,
            "vars": [
              33.8885196114
            ]
          },
          {
            "label": 44.9497741438,
            "vars": [
              85.5038104707
            ]
          },
          {
            "label": 47.0718634953,
            "vars": [
              10.0710697861
            ]
          },
          {
            "label": 52.3520990841,
            "vars": [
              87.0500011554
            ]
          },
          {
            "label": 50.1275446169,
            "vars": [
              1.7635167025
            ]
          },
          {
            "label": 51.8991424812,
            "vars": [
              33.3614710155
            ]
          },
          {
            "label": 51.7011550428,
            "vars": [
              63.6675248914
            ]
          },
          {
            "label": 46.5096869943,
            "vars": [
              69.4822443412
            ]
          },
          {
            "label": 50.33405512,
            "vars": [
              22.5726147625
            ]
          },
          {
            "label": 57.27077292,
            "vars": [
              53.4778751151
            ]
          },
          {
            "label": 46.0180626832,
            "vars": [
              76.8429361898
            ]
          },
          {
            "label": 53.1073577082,
            "vars": [
              54.2337485214
            ]
          },
          {
            "label": 52.9207546787,
            "vars": [
              78.7094699871
            ]
          },
          {
            "label": 58.9433858107,
            "vars": [
              57.2953553854
            ]
          },
          {
            "label": 55.3482387406,
            "vars": [
              16.3998154409
            ]
          },
          {
            "label": 52.8268625559,
            "vars": [
              1.1131212579
            ]
          },
          {
            "label": 57.8486929341,
            "vars": [
              2.69596405
            ]
          },
          {
            "label": 59.458032397,
            "vars": [
              54.3790781475
            ]
          },
          {
            "label": 51.2882892488,
            "vars": [
              79.642273599
            ]
          },
          {
            "label": 63.5995205102,
            "vars": [
              41.3629934299
            ]
          },
          {
            "label": 61.4568361804,
            "vars": [
              90.0142772549
            ]
          },
          {
            "label": 54.0476564225,
            "vars": [
              69.4315321674
            ]
          },
          {
            "label": 53.487175739,
            "vars": [
              83.5757821535
            ]
          },
          {
            "label": 50.8336401218,
            "vars": [
              51.5318501436
            ]
          },
          {
            "label": 56.430155172,
            "vars": [
              93.904027845
            ]
          },
          {
            "label": 58.9358091201,
            "vars": [
              33.5315721284
            ]
          },
          {
            "label": 54.5631918843,
            "vars": [
              26.7979135518
            ]
          },
          {
            "label": 51.8366144896,
            "vars": [
              49.7147788056
            ]
          },
          {
            "label": 54.1605200671,
            "vars": [
              2.5723398149
            ]
          },
          {
            "label": 60.0034393609,
            "vars": [
              42.3620938936
            ]
          },
          {
            "label": 66.6646707895,
            "vars": [
              29.319076868
            ]
          },
          {
            "label": 64.970170333,
            "vars": [
              45.0015859765
            ]
          },
          {
            "label": 62.8885026538,
            "vars": [
              17.6297873682
            ]
          },
          {
            "label": 60.8919194382,
            "vars": [
              98.8071098365
            ]
          },
          {
            "label": 62.2282697282,
            "vars": [
              82.1309525666
            ]
          },
          {
            "label": 68.2569882054,
            "vars": [
              66.9776718456
            ]
          },
          {
            "label": 61.6914385299,
            "vars": [
              67.8355729394
            ]
          },
          {
            "label": 62.804897373,
            "vars": [
              17.0504876266
            ]
          },
          {
            "label": 64.9403859184,
            "vars": [
              78.4713352104
            ]
          },
          {
            "label": 61.9675407638,
            "vars": [
              48.8428326743
            ]
          },
          {
            "label": 72.8212109622,
            "vars": [
              99.6420438618
            ]
          },
          {
            "label": 63.9990452042,
            "vars": [
              16.3254023022
            ]
          },
          {
            "label": 63.4760560344,
            "vars": [
              75.1563576648
            ]
          },
          {
            "label": 76.3951678099,
            "vars": [
              19.0777980026
            ]
          },
          {
            "label": 77.6690429298,
            "vars": [
              33.4279256461
            ]
          },
          {
            "label": 69.0579727279,
            "vars": [
              40.6932925156
            ]
          },
          {
            "label": 74.3829256128,
            "vars": [
              30.166493563
            ]
          },
          {
            "label": 71.15358796,
            "vars": [
              38.9184765895
            ]
          },
          {
            "label": 75.7395918214,
            "vars": [
              17.2111275406
            ]
          },
          {
            "label": 76.7576476291,
            "vars": [
              72.5934196033
            ]
          },
          {
            "label": 72.3854784502,
            "vars": [
              25.0445038937
            ]
          },
          {
            "label": 80.4738996627,
            "vars": [
              62.3318676886
            ]
          },
          {
            "label": 75.1952890432,
            "vars": [
              20.7943892688
            ]
          }
        ]
      },
      "type": {
        "fields": [
          {
            "name": "k",
            "type": "int"
          },
          {
            "name": "samples",
            "type": {
              "items": {
                "fields": [
                  {
                    "name": "vars",
                    "type": {
                      "items": "double",
                      "type": "array"
                    }
                  },
                  {
                    "name": "label",
                    "type": "double"
                  }
                ],
                "name": "sample",
                "type": "record"
              },
              "type": "array"
            }
          }
        ],
        "name": "knn_model",
        "type": "record"
      }
    },
    "query": {
      "init": {
        "count": 150,
        "covariables": [
          "score_math_course1"
        ],
        "sql": "SELECT \"cognitive_task2\",\"score_math_course1\" FROM sample_data WHERE \"cognitive_task2\" IS NOT NULL AND \"score_math_course1\" IS NOT NULL",
        "variable": "cognitive_task2"
      },
      "type": {
        "doc": "Definition of the query that has produced this model",
        "fields": [
          {
            "doc": "Dependent variable",
            "name": "variable",
            "type": "string"
          },
          {
            "doc": "List of explanatory variables",
            "name": "covariables",
            "type": {
              "items": {
                "type": "string"
              },
              "type": "array"
            }
          },
          {
            "doc": "SQL query",
            "name": "sql",
            "type": "string"
          },
          {
            "doc": "Number of records selected by the query",
            "name": "count",
            "type": "int"
          }
        ],
        "name": "Query",
        "type": "record"
      }
    }
  },
  "doc": "RapidMiner Model",
  "end": [],
  "fcns": {
    "toArray": {
      "do": [
        {
          "new": [
            {
              "attr": "m",
              "path": [
                {
                  "string": "score_math_course1"
                }
              ]
            }
          ],
          "type": {
            "items": "double",
            "type": "array"
          }
        }
      ],
      "params": [
        {
          "m": "DependentVariables"
        }
      ],
      "ret": {
        "items": "double",
        "type": "array"
      }
    }
  },
  "input": {
    "doc": "Input is the list of covariables and groups",
    "fields": [
      {
        "name": "score_math_course1",
        "type": "double"
      }
    ],
    "name": "DependentVariables",
    "type": "record"
  },
  "metadata": {
    "docker_image": "hbpmip/java-rapidminer-knn:0.2.1"
  },
  "method": "map",
  "name": "rapidminer",
  "output": {
    "doc": "Output is the estimate of the variable",
    "type": "double"
  },
  "pools": {}
}
